webpackJsonp([3],{0:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var l=a(848),r=n(l);ReactDOM.render(React.createElement("div",null,React.createElement("section",{className:"content-header"},React.createElement("h1",null,"我的文件")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 toolbar"},React.createElement("a",{href:"/karte/new_map",className:"btn btn-primary"},React.createElement("span",{className:"glyphicon glyphicon-plus"})," 新建地图")),React.createElement("div",{className:"col-md-12"},React.createElement(r["default"],null)))),document.getElementById("content"))},848:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(691),o=n(i),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(154),f=a(849),m=n(f),d=a(753),p=n(d),h=a(757),E=n(h),y=function(e){function t(){var e,a,n,c;l(this,t);for(var i=arguments.length,o=Array(i),s=0;i>s;s++)o[s]=arguments[s];return a=n=r(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.state={files:React.createElement("tr",null,React.createElement("td",null,"文件加载中.."))},c=a,r(n,c)}return c(t,e),s(t,[{key:"componentDidMount",value:function(){this.getFiles()}},{key:"deleteFile",value:function(e){var t=this,a=e.currentTarget.id;o["default"].confirm({title:"确认删除该地图?",content:"点击确定继续操作",onOk:function(){$.post("/karte/delete_map",{id:a},function(e){"ok"==e.msg&&t.getFiles()})}})}},{key:"editFileMeta",value:function(e){var t=this,a=e.currentTarget.id;$.get("/karte/map_meta?id="+a,function(e){"ok"==e.msg?(t.refs.meta.setState({file:e.file}),t.refs.meta.open()):console.log(e)})}},{key:"renameFile",value:function(e,t){var a=this;this.refs.fileRenamer.setState({id:e,title:t}),this.refs.fileRenamer.open(function(){a.getFiles()})}},{key:"exportFile",value:function(e,t){this.refs.fileExporter.setState({id:e,title:t}),this.refs.fileExporter.open()}},{key:"getFiles",value:function(){var e=this;$.get("/files",function(t){var a=null;a="ok"==t.msg?t.files.map(function(t){return React.createElement("tr",{key:t._id.$oid},React.createElement("td",null,React.createElement("a",{href:"/file/"+t._id.$oid},React.createElement("i",{className:"glyphicon glyphicon-file"})," ",t.title)),React.createElement("td",null,t.modify_time),React.createElement("td",null,(t.size/1024/1024).toPrecision(2)," MB"),React.createElement("td",null,t.extname),React.createElement("td",null,React.createElement("ul",{className:"nav"},React.createElement("li",{className:"dropdown"},React.createElement("a",{className:"dropdown-toggle","data-toggle":"dropdown",href:"#","aria-expanded":"false"},"操作 ",React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",{id:t._id.$oid,onClick:e.renameFile.bind(e,t._id.$oid,t.title)},React.createElement("a",{href:"javascript:void(0);"},"重命名")),React.createElement("li",{id:t._id.$oid,onClick:e.exportFile.bind(e,t._id.$oid,t.title)},React.createElement("a",{href:"javascript:void(0);"},"导出文件")),React.createElement("li",{id:t._id.$oid,onClick:e.editFileMeta.bind(e)},React.createElement("a",{href:"javascript:void(0);"},"地图元信息编辑")),React.createElement("li",{id:t._id.$oid,onClick:e.deleteFile.bind(e)},React.createElement("a",{href:"javascript:void(0);"},"删除")))))))}):React.createElement("tr",null,React.createElement("td",{colSpan:"5"},"加载文件列表失败.")),e.setState({files:a})})}},{key:"render",value:function(){return React.createElement("div",null,React.createElement(u.Table,null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"文件名"),React.createElement("th",null,"修改时间"),React.createElement("th",null,"大小"),React.createElement("th",null,"类型"),React.createElement("th",null,"操作"))),React.createElement("tbody",null,this.state.files)),React.createElement(m["default"],{ref:"meta"}),React.createElement(p["default"],{ref:"fileRenamer",fileId:this.state.fileId,fileTitle:this.state.fileTitle}),React.createElement(E["default"],{ref:"fileExporter",fileId:this.state.fileId,fileTitle:this.state.fileTitle}))}}]),t}(React.Component);t["default"]=y},849:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(691),o=n(i),s=a(732),u=n(s),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),m=a(154),d=a(1),p=(a(153),function(e){function t(){var e,a,n,c;l(this,t);for(var i=arguments.length,o=Array(i),s=0;i>s;s++)o[s]=arguments[s];return a=n=r(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.state={showModal:!1,file:null},c=a,r(n,c)}return c(t,e),f(t,[{key:"open",value:function(){this.setState({showModal:!0})}},{key:"close",value:function(){this.setState({showModal:!1})}},{key:"proj",value:function(){return null==this.state.file?"未知":this.state.file.meta.proj}},{key:"extent",value:function(){if(null==this.state.file)return d.createElement("div",null);var e=this.state.file.meta;return[d.createElement("span",{key:0,className:"col-xs-6"},"minX: ",e.extent[0]),d.createElement("span",{key:1,className:"col-xs-6"},"minY: ",e.extent[1]),d.createElement("span",{key:2,className:"col-xs-6"},"maxX: ",e.extent[2]),d.createElement("span",{key:3,className:"col-xs-6"},"maxY: ",e.extent[3])]}},{key:"render",value:function(){return d.createElement(o["default"],{title:"空间元信息",visible:this.state.showModal,onCancel:this.close.bind(this),footer:d.createElement(u["default"],{type:"primary",onClick:this.close.bind(this)},"确定")},d.createElement("form",{className:"form-horizontal"},d.createElement(m.FormControls.Static,{label:"坐标投影",labelClassName:"col-xs-3",wrapperClassName:"col-xs-9",value:this.proj()}),d.createElement(m.FormControls.Static,{label:"坐标范围",labelClassName:"col-xs-3",wrapperClassName:"col-xs-9"},this.extent())))}}]),t}(d.Component));t["default"]=p}});